var chat = require('chat/chat');
var editor = require('editor/editor');

var realtime = function(io)
{

    var userOnline = [];
    // evento para la coneccion
    io.on('connection',function(socket){
      // informacion del usuario conectado
      console.log('SocketIO: Usuario Conetado...');
      

      socket.on('online_user', function(data){
          

          var client = 
          {
            'name':data.name, 
            'session':data.session,
            
          };
          //alamacenando usuarios en la pila de conectados
          userOnline.push(client);         

      });

    
      // enviar usuarios conectados
      io.emit('online_user',{usersonline:userOnline});
      
      //eventos del editor
      editor.editor(io, socket);


      //eventos del chat
      chat.chat(io, socket);  





      // evento para la desconeccion
      socket.on('disconnect', function () {
        console.log('SocketIO: Usuario Desconetado...');
      
      });    


    });



    



    
}


exports.realtime = realtime;