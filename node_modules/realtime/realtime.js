var chat = require('chat/chat');
var editor = require('editor/editor');

var realtime = function(io)
{

    var userOnline = [];
    // evento para la coneccion
    io.on('connection',function(socket){
      // informacion del usuario conectado
      
      var client = 
      {
      	'id':socket.id, 
      	'name':socket.request.session,
      	'obj':""
      };
      // alamacenando usuarios en la pila de conectados
      userOnline.push(client);
      console.log(userOnline);

      io.emit('online_user',{msj:'usuario_conectado'});
      
      //eventos del editor
      editor.editor(io, socket);


      //eventos del chat
      chat.chat(io, socket);  





      // evento para la desconeccion
      socket.on('disconnect', function () {
        console.log('SocketIO: Usuario Desconetado...');
      
      });    


    });



    



    
}


exports.realtime = realtime;